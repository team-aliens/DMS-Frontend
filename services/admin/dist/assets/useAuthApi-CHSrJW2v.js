import{d as i,r as l}from"./react-vendor-DvN4Y5o0.js";import{r as S}from"./index-DHERFh5K.js";import{u as c,s as h,a as r,l as T,p as _,c as D,q as u,b as A}from"./queryKeys-B7CxYHCA.js";import{p}from"./index-BhlJXPXA.js";import{c as m,u as n}from"./query-vendor-CBGQWAC0.js";const R=({resetPwdState:e})=>{const{toastDispatch:s}=c(),a=i();return n(()=>S(e),{onSuccess:()=>{s({actionType:"APPEND_TOAST",toastType:"SUCCESS",message:"비밀번호가 변경되었습니다."}),a(p.home)}})},g=({loginState:e,autoSave:s,changeErrorMessage:a})=>{const{toastDispatch:o}=c(),f=i();return n(()=>T(e),{onSuccess:t=>{o({actionType:"APPEND_TOAST",toastType:"SUCCESS",message:"로그인이 완료되었습니다."}),h(t.features);const E=new Date(t.access_token_expired_at);if(r("access_token",t.access_token,{expires:E}),s){const d=new Date(t.refresh_token_expired_at);r("refresh_token",t.refresh_token,{expires:d})}f(p.home)},onError:t=>{t.response.status===404?a("account_id","존재하지 않는 사용자입니다."):t.response.status===401&&a("password","비밀번호가 일치하지 않습니다.")},onSettled:()=>{s?localStorage.setItem("account_id",e.account_id):localStorage.removeItem("account_id")}})},N=({email:e})=>{const{toastDispatch:s}=c(),a=l.useRef("");return n(()=>_({email:e,type:"PASSWORD"}),{onMutate:o=>{o==="RESEND"&&(a.current=o)},onSuccess:()=>{a.current==="RESEND"&&s({actionType:"APPEND_TOAST",toastType:"INFORMATION",message:`${e}으로 인증코드가 재전송 되었습니다.`})}})},x=e=>{const{toastDispatch:s}=c();return m([u.아이디존재여부확인,e],()=>D(e),{refetchOnWindowFocus:!1,enabled:!1,onError:()=>{s({actionType:"APPEND_TOAST",message:"일치하는 아이디가 존재하지 않습니다.",toastType:"ERROR"})}})},w=({email:e,authCode:s})=>m([u.이메일인증코드확인,e,s],()=>A(e,s,"PASSWORD"),{refetchOnWindowFocus:!1,enabled:!1});export{R as a,w as b,x as c,N as d,g as u};
