import{j as s,k as z,n as H}from"./design-system-R5PU-KJ5.js";import{H as T}from"./style-vendor-CCa_bSPe.js";import{r as d}from"./react-vendor-DvN4Y5o0.js";import{A as L,S as Q,C as G,a as K}from"./AddSeatType-DUSRbZG1.js";import{W as N}from"./WithNavigatorBar-BaUD9vuh.js";import{u as F,b as J}from"./index-BhlJXPXA.js";import{j as X,k as Z,l as $}from"./index-D4m5LYf9.js";import{u as V}from"./useStudyRoom-BGqrPZyW.js";import{u as U}from"./useObj-Bg0VYG3V.js";import{b as tt}from"./query-vendor-CBGQWAC0.js";import"./queryKeys-B7CxYHCA.js";import"./utils-vendor-Bc17E_qf.js";import"./useDropDown-hVZVKMV4.js";import"./useForm-DVm8TY_W.js";import"./index-BYUM15lW.js";import"./useSchoolsApi-kltzsy-n.js";import"./excel-vendor-CYB7cqj3.js";import"./decoder-D13FVXDo.js";function jt(){const[R,h]=d.useState(!1),[w,b]=d.useState(""),{selectModal:E,modalState:S}=F(),{studyRoomState:i,onChangeGrade:M,onChangeInput:f,onChangeSex:A,onChangeSeatSetting:P,onChangeStudyTime:I,initalValue:O}=V(),{name:l,floor:n,total_height_size:g,total_width_size:_,east_description:r,west_description:c,north_description:p,south_description:m,...y}=i,{seat:st,...x}=i,{data:u,refetch:it}=X();d.useEffect(()=>{O()},[]);const{obj:C,changeObjectValue:e}=U({floor:"",name:"",eastDescription:"",westDescription:"",southDescription:"",northDescription:""}),D=()=>(!n||n<=0?e("floor","1 이상이어야 합니다."):e("floor",""),l?e("name",""):e("name","공백일 수 없습니다."),r?e("eastDescription",""):e("eastDescription","공백일 수 없습니다."),c?e("westDescription",""):e("westDescription","공백일 수 없습니다."),m?e("southDescription",""):e("southDescription","공백일 수 없습니다."),p?e("northDescription",""):e("northDescription","공백일 수 없습니다."),!!(n&&n>0&&l&&r&&c&&p&&m)),k=Z({...x,seats:x.seats.map(t=>{var a;return{width_location:t.width_location,height_location:t.height_location,number:t.number||null,status:t.status,type_id:((a=t.type)==null?void 0:a.id)||null}})}),v=()=>{h(!1)},B=tt(),W=$(w,{onSuccess:()=>B.invalidateQueries(["seatType"])}),Y=async t=>{await b(t),W.mutate()},q=(t,a)=>{h(!0);const[o]=i.seats.filter(j=>j.height_location===a+1&&j.width_location===t+1);P({width_location:t,height_location:a,type:(o==null?void 0:o.type)||null,status:(o==null?void 0:o.status)||"EMPTY",number:(o==null?void 0:o.number)||null})};return s.jsxs(N,{children:[S.selectedModal==="ADD_SEAT_TYPE"&&s.jsx(L,{}),s.jsx(Q,{seatSetting:R,selectModal:E,seatTypeList:(u==null?void 0:u.types)||[],deleteSeatType:Y,closeSeatSetting:v,addSeat:S.selectedModal==="ADD_SEAT_TYPE"}),s.jsxs(et,{children:[s.jsx(z,{left:351,pathToKorean:J}),s.jsx(G,{onChange:f,floor:n,name:l,total_width_size:_,total_height_size:g,errorMessages:C,errorChange:D}),s.jsxs(ot,{children:[s.jsx(H,{east_description:r,west_description:c,north_description:p,south_description:m,...y,seats:i.seats.map(t=>({...t,student:null})),isEdit:!0,selectedPosition:{x:i.seat.width_location,y:i.seat.height_location},onClickSeat:q,total_width_size:_,total_height_size:g}),s.jsx(K,{setTimeSlotId:t=>{},onChangeSegmented:A,onChangeInput:f,onChangeGrade:M,onChangeStudyTime:I,isCreateRoom:!0,createStudyRoom:k.mutate,default_time_slots_id:[],errorMessages:C,errorChange:D,east_description:r,west_description:c,north_description:p,south_description:m,...y})]})]})]})}const et=T.section`
  width: 1040px;
  margin: 0 auto;
  margin-top: 140px;
  margin-bottom: 50px;
`,ot=T.div`
  display: flex;
  margin-top: 78px;
`;export{jt as CreateRoom};
