import{j as e,q as j,r as w,M as O,A as N,B as y,I as W,R as de,l as pe}from"./design-system-R5PU-KJ5.js";import{W as xe}from"./WithNavigatorBar-BaUD9vuh.js";import{H as n}from"./style-vendor-CCa_bSPe.js";import{r as g,L as ue}from"./react-vendor-DvN4Y5o0.js";import{u as he}from"./index-BhlJXPXA.js";import{s as ge,e as fe,a as me}from"./utils-vendor-Bc17E_qf.js";import{D as je}from"./delete-ChCvswoC.js";import{u as Ce,a as ye,b as _e,c as we,d as ve,e as $e,f as be,g as De,h as Se,i as ke,j as Z}from"./useVoteApi-DKbPm0Pc.js";import"./queryKeys-B7CxYHCA.js";import"./useSchoolsApi-kltzsy-n.js";import"./query-vendor-CBGQWAC0.js";const Ve=()=>e.jsxs("svg",{width:"200",height:"200",viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{width:"200",height:"200",rx:"100",fill:"#3D8AFF"}),e.jsx("path",{d:"M155.423 59.731L101.423 41.731C100.499 41.423 99.5006 41.423 98.5769 41.731L44.5769 59.731C43.6808 60.0297 42.9015 60.6027 42.3493 61.369C41.7971 62.1352 41.4999 63.0558 41.5 64.0003V109C41.5 110.194 41.9741 111.338 42.818 112.182C43.6619 113.026 44.8065 113.5 46 113.5C47.1935 113.5 48.3381 113.026 49.182 112.182C50.0259 111.338 50.5 110.194 50.5 109V70.2441L69.3944 76.5385C64.3744 84.6486 62.7781 94.4194 64.9559 103.706C67.1337 112.992 72.9077 121.034 81.01 126.067C70.885 130.038 62.1325 137.221 55.7312 147.042C55.3983 147.537 55.1671 148.093 55.051 148.678C54.9348 149.263 54.9361 149.865 55.0548 150.45C55.1734 151.034 55.4071 151.589 55.7421 152.082C56.0772 152.576 56.5069 152.998 57.0065 153.323C57.506 153.649 58.0652 153.872 58.6518 153.98C59.2383 154.088 59.8405 154.078 60.4232 153.951C61.0058 153.824 61.5575 153.582 62.046 153.24C62.5345 152.898 62.9501 152.463 63.2688 151.958C71.7456 138.953 85.1331 131.5 100 131.5C114.867 131.5 128.254 138.953 136.731 151.958C137.391 152.939 138.411 153.621 139.57 153.856C140.728 154.092 141.933 153.861 142.923 153.216C143.914 152.57 144.61 151.56 144.862 150.405C145.113 149.25 144.9 148.042 144.269 147.042C137.868 137.221 129.081 130.038 118.99 126.067C127.085 121.034 132.853 112.997 135.031 103.718C137.208 94.4385 135.617 84.6744 130.606 76.5666L155.423 68.2978C156.319 67.9993 157.099 67.4263 157.651 66.66C158.204 65.8938 158.501 64.9731 158.501 64.0285C158.501 63.0838 158.204 62.1631 157.651 61.3969C157.099 60.6306 156.319 60.0576 155.423 59.7591V59.731ZM127 95.5003C127.001 99.7689 125.99 103.977 124.05 107.779C122.11 111.581 119.296 114.869 115.84 117.374C112.383 119.878 108.381 121.527 104.164 122.185C99.9464 122.843 95.633 122.492 91.5774 121.161C87.5218 119.829 83.8398 117.555 80.8333 114.525C77.8269 111.495 75.5817 107.795 74.282 103.729C72.9823 99.6631 72.6651 95.3469 73.3565 91.1347C74.0479 86.9225 75.7281 82.9343 78.2594 79.4972L98.5769 86.2472C99.5006 86.5552 100.499 86.5552 101.423 86.2472L121.741 79.4972C125.159 84.1324 127.002 89.741 127 95.5003ZM100 77.2585L60.2312 64.0003L100 50.7422L139.769 64.0003L100 77.2585Z",fill:"white"})]}),Le=()=>e.jsxs("svg",{width:"200",height:"200",viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{width:"200",height:"200",rx:"100",fill:"#DDDDDD"}),e.jsx("path",{d:"M136 105.988H106V135.988C106 137.579 105.368 139.105 104.243 140.23C103.117 141.356 101.591 141.988 100 141.988C98.4087 141.988 96.8826 141.356 95.7574 140.23C94.6321 139.105 94 137.579 94 135.988V105.988H64C62.4087 105.988 60.8826 105.356 59.7574 104.23C58.6321 103.105 58 101.579 58 99.9878C58 98.3965 58.6321 96.8704 59.7574 95.7452C60.8826 94.6199 62.4087 93.9878 64 93.9878H94V63.9878C94 62.3965 94.6321 60.8704 95.7574 59.7452C96.8826 58.6199 98.4087 57.9878 100 57.9878C101.591 57.9878 103.117 58.6199 104.243 59.7452C105.368 60.8704 106 62.3965 106 63.9878V93.9878H136C137.591 93.9878 139.117 94.6199 140.243 95.7452C141.368 96.8704 142 98.3965 142 99.9878C142 101.579 141.368 103.105 140.243 104.23C139.117 105.356 137.591 105.988 136 105.988Z",fill:"white"})]}),H=({selectionType:t,selected:x,onSelected:s})=>e.jsxs(Me,{onClick:s,select:x,children:[t==="etc"?e.jsx(Le,{}):e.jsx(Ve,{}),e.jsxs(Ee,{children:[e.jsxs("span",{children:[t==="etc"?"기타":"모범 학생"," 투표"]}),e.jsxs("div",{children:[e.jsxs("p",{children:[t==="etc"?"기타":"모범 학생"," 투표를"]})," 만들 때에는 이곳을 클릭하세요!"]})]})]}),Me=n.div`
  background-color: white;
  border-radius: 24px;
  box-shadow: ${({select:t})=>t?"0px 30px 40px rgba(0, 115, 255, 0.12), 0px 12px 20px rgba(0, 115, 255, 0.06)":"0px 1px 15px rgba(0, 0, 0, 0.1)"};
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 82px 88px;
  gap: 28px;
  cursor: pointer;
  &:hover {
    box-shadow: 0px 30px 40px rgba(0, 115, 255, 0.12),
      0px 12px 20px rgba(0, 115, 255, 0.06);
  }
`,Ee=n.div`
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
  > span {
    font: ${j.titleM};
  }
  > div {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
`,Oe=(t,x)=>{const[s,h]=g.useState(t),[o,l]=g.useState(x),[u,v]=g.useState([]),[m,p]=g.useState([]);return g.useEffect(()=>{const d=ge(new Date(s,o-1)),r=fe(new Date(s,o-1)),i=d.getDay(),C=me({start:d,end:r}),b=new Array(i).fill(null).concat(C);v(b)},[s,o]),g.useEffect(()=>{p([])},[s,o]),{year:s,month:o,daysInMonth:u,selectedDates:m,onArrowClick:d=>{l(r=>{let i=d==="left"?r-1:r+1,C=s;return i<1?(C-=1,i=12):i>12&&(C+=1,i=1),h(C),i})},onDateClick:d=>{d&&p(r=>r.some(C=>C.getTime()===d.getTime())?r.filter(C=>C.getTime()!==d.getTime()):r.length<2?[...r,d]:[r[1],d])}}},Te=({selectedDates:t,onDateClick:x,daysInMonth:s})=>{const h=["일","월","화","수","목","금","토"];return e.jsxs(Be,{children:[e.jsx(Pe,{children:h.map((o,l)=>e.jsx(Ie,{isSunday:l===0,isSaturday:l===6,children:o},l))}),e.jsx(Fe,{children:s.map((o,l)=>e.jsx(Ae,{onClick:()=>x(o),isSelected:t.some(u=>u.getTime()===(o==null?void 0:o.getTime())),children:o?o.getDate():""},l))})]})},Ie=n.div`
  width: 48px;
  height: 48px;
  display: flex;
  justify-content: center;
  align-items: center;
  font: ${j.bodyL};
  ${({isSunday:t,isSaturday:x})=>`
  color: ${t?w.error:x?w.primary:"black"};
`}
`,Pe=n.div`
  display: flex;
  gap: 8px;
`,Be=n.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 8px;
`,Fe=n.div`
  display: grid;
  grid-template-columns: repeat(7, 48px);
  gap: 8px;
  justify-content: center;
  align-items: center;
`,Ae=n.div`
  background: ${({isSelected:t})=>t?w.primary:w.primaryLighten2};
  color: ${({isSelected:t})=>t?"white":"black"};
  border-radius: 8px;
  width: 48px;
  height: 48px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  &:hover {
    background-color: ${w.primary};
    color: white;
  }
`,Ne=({setVoteDate:t,setIsOpen:x,onClose:s})=>{const h=new Date,{year:o,month:l,selectedDates:u,onArrowClick:v,daysInMonth:m,onDateClick:p}=Oe(h.getFullYear(),h.getMonth()+1),[c,$]=g.useState(["","","",""]),d=(i,C)=>{const b=[...c];b[i]=C,$(b)},r=()=>{let i="";u.length>0&&(i=`${o}-${l}-${u[0].getDate()} / ${c[0]||"00"}:${c[1]||"00"}`),u.length>1&&(i+=` ~ ${o}-${l}-${u[1].getDate()} / ${c[2]||"00"}:${c[3]||"00"}`),t(i),x(!1)};return e.jsx(O,{close:s,buttonList:[e.jsxs(Ze,{children:[e.jsxs("div",{children:[u.length>0&&`${o}-${l}-${u[0].getDate()} / ${c[0]||"00"}:${c[1]||"00"}`,u.length>1&&` ~ ${o}-${l}-${u[1].getDate()} / ${c[2]||"00"}:${c[3]||"00"}`]}),e.jsx(y,{disabled:c.some(i=>i===""),onClick:r,children:"확인"})]})],title:"투표 마감일",width:"880px",children:e.jsxs(Ye,{children:[e.jsxs(ze,{children:[e.jsx("div",{onClick:()=>v("left"),children:e.jsx(N,{direction:"left",size:24})}),o,"년 ",l,"월",e.jsx("div",{onClick:()=>v("right"),children:e.jsx(N,{direction:"right",size:24})})]}),e.jsxs(Ue,{children:[e.jsx(Te,{selectedDates:u,daysInMonth:m,onDateClick:p}),e.jsxs(Re,{children:[e.jsx("span",{children:"시간 지정"}),e.jsx(He,{children:e.jsxs(We,{children:[e.jsxs(U,{children:[e.jsx("input",{placeholder:"00",maxLength:2,value:c[0],onChange:i=>d(0,i.target.value),type:"text"}),e.jsx("p",{children:":"}),e.jsx("input",{placeholder:"00",maxLength:2,value:c[1],onChange:i=>d(1,i.target.value),type:"text"})]}),e.jsx("p",{children:"~"}),e.jsxs(U,{children:[e.jsx("input",{placeholder:"00",maxLength:2,value:c[2],onChange:i=>d(2,i.target.value),type:"text"}),e.jsx("p",{children:":"}),e.jsx("input",{placeholder:"00",maxLength:2,value:c[3],onChange:i=>d(3,i.target.value),type:"text"})]})]})})]})]})]})})},U=n.div`
  display: flex;
  gap: 12px;
  align-items: center;
  > input {
    width: 25px;
    font: ${j.bodyL};
    background-color: transparent;
  }
`,We=n.div`
  background-color: ${w.primaryLighten2};
  padding: 3px 32px;
  border-radius: 8px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 56px;
`,He=n.div`
  border: 1px solid ${w.gray3};
  border-radius: 12px;
  padding: 39px 16px;
`,Ue=n.div`
  display: flex;
  gap: 28px;
`,Re=n.div`
  display: flex;
  flex-direction: column;
  gap: 12px;
  > span {
    font: ${j.bodyM};
  }
`,Ze=n.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  font: ${j.titleM};
`,Ye=n.div`
  display: flex;
  flex-direction: column;
  gap: 14px;
`,ze=n.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  font: ${j.bodyL};
  > div {
    cursor: pointer;
  }
`,Ge=({onClose:t})=>e.jsx(O,{close:t,title:"항목이 가득찼습니다.",buttonList:[e.jsx(y,{kind:"outline",onClick:t,children:"취소"}),e.jsx(y,{disabled:!1,onClick:t,children:"확인"})],width:"560px",children:"투표 선택지를 더 이상 추가 할 수 없습니다."}),qe=({mode:t,votingId:x,onClose:s})=>{const[h,o]=g.useState(""),[l,u]=g.useState(!1),{mutate:v}=Ce(),{mutate:m}=ye(),{data:p}=_e(x),c=Array.isArray(p==null?void 0:p.voting_options)?p.voting_options:[],$=()=>{if(h){if((p==null?void 0:p.voting_options.length)>=50){u(!0);return}v({voting_topic_id:x,option_name:h}),o("")}},d=r=>{m(r)};return e.jsxs(e.Fragment,{children:[e.jsx(O,{close:s,buttonList:[e.jsx(y,{kind:"outline",onClick:s,children:"이전"},"previous"),e.jsx(y,{onClick:()=>window.location.reload(),children:"확인"},"confirm")],width:"1150px",children:e.jsxs(Ke,{children:[e.jsxs(Qe,{children:[e.jsx("span",{children:t==="edit"?"투표 항목 수정":"투표 항목 생성"}),c==null?void 0:c.length,"/50"]}),e.jsxs(Je,{children:[c==null?void 0:c.map(r=>e.jsxs("li",{children:[e.jsx("input",{type:"text",value:r.voting_option_name,readOnly:!0}),e.jsx("button",{onClick:()=>d(r.id),children:e.jsx(Xe,{src:je})})]},r.id)),e.jsxs("li",{children:[e.jsx("input",{type:"text",value:h,onChange:r=>o(r.target.value),placeholder:"새 항목 추가"}),e.jsx("button",{onClick:$,children:"추가"})]})]})]})}),l&&e.jsx(Ge,{onClose:()=>u(!1)})]})},Je=n.ul`
  padding: 0;
  height: 400px;
  overflow: auto;
  box-sizing: border-box;
  list-style: none;

  > li {
    display: flex;
    align-items: center;
    margin-bottom: 12px;

    > input {
      width: 410px;
      height: 46px;
      border: 2px solid #3d8aff;
      border-radius: 4px;
      padding: 0 20px;
      box-sizing: border-box;
      margin-right: 12px;
      color: ${w.gray7};
      font: ${j.bodyM};
    }

    > button {
      background: transparent;
      border: none;
      cursor: pointer;
    }
  }
`,Ke=n.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  gap: 34px;
`,Qe=n.div`
  display: flex;
  justify-content: space-between;
  font: ${j.bodyM};
  color: ${w.gray5};
  > span {
    font: ${j.headlineS};
    color: black;
  }
`,Xe=n.img`
  cursor: pointer;
`,et=()=>e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7.53223 14.0332C8.92969 14.0332 10.2393 13.6113 11.3291 12.8906L15.1787 16.749C15.4336 16.9951 15.7588 17.1182 16.1104 17.1182C16.8398 17.1182 17.376 16.5469 17.376 15.8262C17.376 15.4922 17.2617 15.167 17.0156 14.9209L13.1924 11.0801C13.9834 9.95508 14.4492 8.59277 14.4492 7.11621C14.4492 3.31055 11.3379 0.199219 7.53223 0.199219C3.73535 0.199219 0.615234 3.31055 0.615234 7.11621C0.615234 10.9219 3.72656 14.0332 7.53223 14.0332ZM7.53223 12.1875C4.74609 12.1875 2.46094 9.90234 2.46094 7.11621C2.46094 4.33008 4.74609 2.04492 7.53223 2.04492C10.3184 2.04492 12.6035 4.33008 12.6035 7.11621C12.6035 9.90234 10.3184 12.1875 7.53223 12.1875Z",fill:"#999999"})});function tt({onClose:t,edit:x}){const[s,h]=g.useState(""),[o,l]=g.useState([]),u=new Date,v=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}-${String(u.getDate()).padStart(2,"0")}`,{data:m}=we(v),{data:p}=ve(),{mutate:c}=$e(),{mutate:$}=be(),d=(m==null?void 0:m.students)??[],r=(p==null?void 0:p.excluded_students)??[],C=x?[...d,...r.filter(a=>!d.some(k=>k.gcn===a.gcn))]:r;g.useEffect(()=>{if(p!=null&&p.excluded_students){const a=p.excluded_students.map(k=>k.gcn);l(a)}},[p]);const b=s?C.filter(a=>a.gcn.includes(s)):C,V=(a,k)=>{const D=o.includes(a);D?$(k):c({id:k,gcn:a}),l(L=>D?L.filter(M=>M!==a):[...L,a])},S=a=>{h(a.target.value)};return e.jsx(O,{buttonList:[e.jsx(y,{kind:"outline",onClick:t,children:"취소"}),e.jsx(y,{onClick:()=>window.location.reload(),children:"확인"})],close:t,width:"1150px",children:e.jsxs(lt,{children:[e.jsx(rt,{children:"제외 학생 지정"}),e.jsxs(it,{children:[e.jsxs(ot,{children:[e.jsx(et,{}),e.jsx("input",{type:"text",onChange:S,value:s})]}),e.jsx(st,{children:b.length!==0?b.map(a=>e.jsxs(nt,{onClick:()=>V(a.gcn,a.id),check:o.includes(a.gcn),children:[e.jsx("span",{children:a.name}),e.jsx("span",{children:a.gcn})]},a.gcn)):e.jsx("span",{children:"아직 제외된 학생이 없습니다."})})]})]})})}const nt=n.div`
  padding: 21px 0 21px 36px;
  border-radius: 4px;
  box-shadow: 0px 1px 15px rgba(0, 0, 0, 0.1);
  width: 770px;
  background-color: ${t=>t.check?w.primaryDarken1:"transparent"};
  color: ${t=>t.check?"white":"inherit"};
  display: flex;
  gap: 12px;
  cursor: pointer;
  > span {
    font: ${j.bodyL};
  }
  &:hover {
    background-color: ${w.primaryDarken1};
    color: white;
  }
`,st=n.div`
  max-height: 400px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
  height: 400px;
  > span {
    display: flex;
    justify-content: center;
    align-items: center;
    font: ${j.bodyL};
    color: ${w.gray5};
    height: 100%;
  }
`,ot=n.div`
  border-radius: 30px;
  background-color: ${w.gray1};
  box-shadow: 0px 1px 15px rgba(0, 0, 0, 0.1);
  width: 241px;
  padding: 10px 0px 9px 14px;
  display: flex;
  align-items: center;
  gap: 12px;
  > input {
    font: ${j.bodyL};
  }
`,it=n.div`
  display: flex;
  flex-direction: column;
  gap: 16px;
`,lt=n.div`
  display: flex;
  flex-direction: column;
  gap: 24px;
  max-height: 500px;
  overflow: hidden;
`,rt=n.header`
  font: ${j.headlineS};
`,I=t=>{if(t[0])return"STUDENT_VOTE";if(t[1])return"APPROVAL_VOTE";if(t[2])return"OPTION_VOTE"},Y=({voteTopic:t,isClose:x,edit:s,surveyId:h,topic_name:o,description:l,vote_date:u})=>{const{mutate:v}=De(),{mutate:m}=Se(),{closeModal:p}=he(),[c,$]=g.useState(!1),[d,r]=g.useState(s?o:""),[i,C]=g.useState(s?u:""),[b,V]=g.useState(""),S=["학생","찬반","선택"],[a,k]=g.useState(new Array(S.length).fill(!1)),[D,L]=g.useState(s?l:""),[M,P]=g.useState(!1),[z,B]=g.useState(!1),G=f=>{const _=f.target.value;r(_)},q=()=>{$(!1)},J=()=>{B(!1)},K=f=>{const _=f.target.value;L(_)},F=()=>{$(!0)},Q=()=>{B(!0)},X=f=>{k(_=>_.map((E,T)=>T===f?!E:E))},A=f=>{try{const[_,E]=f.split(" ~ "),T=ne=>{const[se,oe]=ne.split(" / "),[ie,le,re]=se.split("-").map(Number),[ce,ae]=oe.split(":").map(Number);return new Date(Date.UTC(ie,le-1,re,ce,ae)).toISOString()};return{start_time:T(_),end_time:T(E)}}catch(_){return console.error("날짜 변환 오류:",_),null}},ee=()=>{if(a[2]){P(!0);const f=A(i);s?m({content:{topic_name:t?d:`${new Date().getMonth()+1}월 모범학생 투표`,description:D,start_time:f.start_time,end_time:f.end_time,vote_type:t?I(a):"MODEL_STUDENT_VOTE"},voteId:h},{onSuccess:()=>{V(h)}}):v({topic_name:t?d:`${new Date().getMonth()+1}월 모범학생 투표`,description:D,start_time:f.start_time,end_time:f.end_time,vote_type:t?I(a):"MODEL_STUDENT_VOTE"},{onSuccess:_=>{const{voting_topic_id:E}=_;V(E)}})}else{const f=A(i);if(!f){console.error("날짜 형식이 잘못되었습니다.");return}s?m({content:{topic_name:t?d:`${new Date().getMonth()+1}월 모범학생 투표`,description:D,start_time:f.start_time,end_time:f.end_time,vote_type:t?I(a):"MODEL_STUDENT_VOTE"},voteId:h}):v({topic_name:t?d:`${new Date().getMonth()+1}월 모범학생 투표`,description:D,start_time:f.start_time,end_time:f.end_time,vote_type:t?I(a):"MODEL_STUDENT_VOTE"}),setTimeout(()=>window.location.reload(),2e3)}},te=()=>{P(!1)};return e.jsxs(e.Fragment,{children:[M&&e.jsx(qe,{mode:"create",onClose:te,votingId:b}),!M&&e.jsx(O,{close:p,title:s?"투표 항목 수정":"투표 항목 생성",buttonList:[e.jsx(y,{kind:"outline",onClick:x,children:"취소"}),e.jsx(y,{disabled:t?d===""||i===""||D===""||(()=>{const f=a.filter(_=>_).length;return f===0||f>1})():i===""||D==="",onClick:ee,children:a[2]?"다음":"확인"})],width:"1150px",children:e.jsxs(at,{children:[e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(W,{placeholder:t?"투표 제목을 작성해주세요.":"모범학생 투표",label:"투표 제목",name:"투표 제목",onChange:t?G:null,value:t?d:`${new Date().getMonth()+1}월 모범학생 투표`}),e.jsx(W,{placeholder:"없음",label:"투표 마감일",name:"투표 마감일",onChange:()=>{},value:i}),t?e.jsxs(pt,{children:["투표 주제",e.jsx(xt,{children:S.map((f,_)=>e.jsxs("div",{onClick:()=>X(_),children:[f,e.jsx(de,{className:a[_]?"checked":""})]},_))})]}):e.jsxs(R,{children:[e.jsx(y,{onClick:F,children:s?"투표 마감일 수정":"투표 마감일 지정"}),e.jsx(y,{onClick:Q,children:s?"제외 학생 수정":"제외 학생 지정"})]})]}),t&&e.jsx(R,{children:e.jsx(y,{onClick:F,children:s?"투표 마감일 수정":"투표 마감일 지정"})})]}),e.jsxs(ct,{children:["설명 추가",e.jsx(pe,{value:D,onChange:K,width:680,height:218,placeholder:"설명을 추가해주세요."})]})]})}),c&&e.jsx(Ne,{setVoteDate:C,setIsOpen:$,onClose:q}),z&&e.jsx(tt,{onClose:J,edit:s})]})},ct=n.div`
  display: flex;
  flex-direction: column;
  gap: 6px;
  font: ${j.bodyS};
  color: ${w.gray6};
`,at=n.div`
  display: flex;
  gap: 44px;
`,dt=n.div`
  display: flex;
  flex-direction: column;
  gap: 51px;
`,R=n.div`
  display: flex;
  gap: 16px;
`,pt=n.div`
  display: flex;
  flex-direction: column;
  font: ${j.bodyS};
  color: ${w.gray6};
`,xt=n.div`
  font: ${j.bodyM};
  display: flex;
  gap: 12px;

  > div {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
  }
`,ut=n.div`
  width: 328px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`,ht=({onClose:t})=>{const[x,s]=g.useState([!1,!1]),[h,o]=g.useState(!1),l=m=>{s(p=>p.map((c,$)=>$===m?!c:!1))},u=()=>{o(!0)},v=()=>{o(!1)};return e.jsxs(e.Fragment,{children:[!h&&e.jsx(O,{close:t,buttonList:[e.jsx(y,{kind:"outline",onClick:t,children:"취소"}),e.jsx(y,{disabled:x.every(m=>m===!1),onClick:u,children:"다음"})],title:"투표 항목 생성",width:"1150px",children:e.jsxs(gt,{children:[e.jsx(H,{selectionType:"student",selected:x[0],onSelected:()=>l(0)}),e.jsx(H,{selectionType:"etc",selected:x[1],onSelected:()=>l(1)})]})}),h&&e.jsx(Y,{voteTopic:x[1],isClose:v,edit:!1})]})},gt=n.div`
  display: flex;
  gap: 54px;
  justify-content: center;
`,ft=({surveyId:t,topic_name:x,start_time:s,end_time:h})=>{const o=new Date(h)<new Date,{mutate:l}=ke(),[u,v]=g.useState(!1),m=(i,C)=>{const b=V=>{const S=new Date(V),a=S.getFullYear(),k=S.getMonth()+1,D=S.getDate(),L=S.getHours(),M=S.getMinutes();return`${a}-${k}-${D} / ${L}:${M.toString().padStart(2,"0")}`};return`${b(i)} ~ ${b(C)}`},p=()=>{l(t)},c=()=>{v(!0)},$=()=>{v(!1)},{data:d}=Z(),r=d.voting_topics.filter(i=>i.id===t);return e.jsxs(e.Fragment,{children:[u&&e.jsx(Y,{edit:!0,isClose:$,voteTopic:r[0].vote_type!=="MODEL_STUDENT_VOTE",surveyId:t,topic_name:r[0].topic_name,description:r[0].description,vote_date:m(r[0].start_time,r[0].end_time)}),e.jsxs(jt,{children:[e.jsxs(Ct,{children:[e.jsx(yt,{children:x}),e.jsxs(mt,{children:[e.jsx(_t,{children:"마감일"}),e.jsx(wt,{DeadLine:o,children:m(s,h)})]})]}),e.jsxs(vt,{children:[e.jsx(ue,{to:`result/${t}`,children:e.jsx(y,{children:"결과 확인"})}),e.jsx(y,{onClick:c,children:"수정"}),e.jsx(y,{kind:"outline",color:"gray",onClick:p,children:"삭제"})]})]})]})},mt=n.div`
  display: flex;
  flex-direction: column;
  gap: 6px;
`,jt=n.div`
  width: 428px;
  border-radius: 12px;
  background: #fff;
  box-shadow: 0px 1px 15px rgba(0, 0, 0, 0.1);
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 70px;
  cursor: pointer;
  &:hover {
    box-shadow: 0px 30px 40px rgba(0, 115, 255, 0.12),
      0px 12px 20px rgba(0, 115, 255, 0.06);
  }
`,Ct=n.div`
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: flex-start;
  gap: 16px;
`,yt=n.div`
  color: #343434;
  font: ${j.titleM};
  word-wrap: break-word;
`,_t=n.div`
  color: #343434;
  font: ${j.bodyL};
  word-wrap: break-word;
`,wt=n.div`
  color: ${({DeadLine:t})=>t?w.gray5:w.primary};
  font: ${j.bodyL};
  word-wrap: break-word;
`,vt=n.div`
  display: flex;
  align-items: center;
  justify-content: right;
  width: 100%;
  gap: 4px;
`,At=()=>{const[t,x]=g.useState(!1),{data:s}=Z(),h=()=>{x(!0)},o=()=>{x(!1)};return e.jsxs(xe,{children:[t&&e.jsx(ht,{onClose:o}),e.jsxs(Dt,{children:[e.jsx($t,{children:e.jsx(y,{onClick:h,children:"투표 항목 추가 +"})}),e.jsx(bt,{children:s==null?void 0:s.voting_topics.map(l=>e.jsx(ft,{surveyId:l.id,topic_name:l.topic_name,end_time:l.end_time,start_time:l.start_time},l.id))})]})]})},$t=n.div`
  display: flex;
  justify-content: right;
  width: 100%;
`,bt=n.div`
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
`,Dt=n.div`
  padding: 100px 100px 0px 50px;
  display: flex;
  flex-direction: column;
  gap: 40px;
  width: 100%;
`;export{At as Main};
