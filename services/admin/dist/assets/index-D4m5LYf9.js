import{u as p,p as u}from"./index-BhlJXPXA.js";import{i as o,u as i}from"./queryKeys-B7CxYHCA.js";import{f as r}from"./excel-vendor-CYB7cqj3.js";import{g as R}from"./decoder-D13FVXDo.js";import{c as E,u as n}from"./query-vendor-CBGQWAC0.js";import{d as m}from"./react-vendor-DvN4Y5o0.js";const c="/study-rooms",g=()=>E(["getStudentRoomApplicationTime"],async()=>{const{data:s}=await o.get(`${c}/available-time`);return s}),D=s=>{const t=m(),{toastDispatch:e}=i();return n(async()=>o.post(c,s),{onSuccess:()=>{e({toastType:"SUCCESS",actionType:"APPEND_TOAST",message:"자습실이 생성되었습니다."}),t(`${u.apply.studyRoom.list}`)},onError:a=>{const T=a;if(T.response.data)switch(T.response.status){case 400:{e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"값이 잘못되었습니다."});break}case 401:{e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"계정오류"});break}case 403:{e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"권한이 없습니다."});break}case 409:{e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"자습실이 이미 존재합니다"});break}case 429:{e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"너무 많이 요청되었습니다."});break}default:e({toastType:"ERROR",actionType:"APPEND_TOAST",message:`ERROR CODE : ${T.response.status}`})}}})},_=(s,t)=>n(async()=>o.put(`${c}/available-time`,s),{...t}),N=(s,t)=>{const e=m(),{toastDispatch:a}=i(),{closeModal:T}=p();return n(async()=>o.delete(`${c}/${s}`),{onSuccess:()=>{T(),e(`${u.apply.studyRoom.list}`),a({toastType:"SUCCESS",actionType:"APPEND_TOAST",message:"자습실이 삭제되었습니다."})}})},$=(s,t)=>E(["studyRoomDetail",s],async()=>{const{data:e}=await o.get(`${c}/${s}/managers`,{params:{time_slot:t}});return e},{refetchOnWindowFocus:!0}),b=(s,t)=>{const e=m(),{toastDispatch:a}=i(),{closeModal:T}=p();return n(async()=>o.patch(`${c}/${s}`,t),{onSuccess:()=>{a({toastType:"SUCCESS",actionType:"APPEND_TOAST",message:"자습실이 수정되었습니다."}),e(`${u.apply.studyRoom.list}`),T()},onError:y=>{if(y.request.status)switch(y.request.status){case 400:{a({toastType:"ERROR",actionType:"APPEND_TOAST",message:"값이 잘못되었습니다."});break}case 401:{a({toastType:"ERROR",actionType:"APPEND_TOAST",message:"계정오류"});break}case 403:{a({toastType:"ERROR",actionType:"APPEND_TOAST",message:"권한이 없습니다."});break}case 409:{a({toastType:"ERROR",actionType:"APPEND_TOAST",message:"자습실이 이미 존재합니다"});break}case 429:{a({toastType:"ERROR",actionType:"APPEND_TOAST",message:"너무 많이 요청되었습니다."});break}default:a({toastType:"ERROR",actionType:"APPEND_TOAST",message:`ERROR CODE : ${y.request.status}`})}}})},f=({time_slot:s})=>n(["studyRoomList"],async()=>{const{data:t}=await o.get(`${c}/list/managers?time_slot=${s}`);return t}),h=s=>E(["seatType"],async()=>{const{data:t}=await o.get(`${c}/types${s?`?study_room_id=${s}`:""}`);return t}),C=(s,t)=>n(async()=>o.post(`${c}/types`,s),{...t}),w=(s,t)=>n(async()=>o.delete(`${c}/types/${s}`),{...t}),k=()=>n(["useStudyTimeSlots"],async()=>{const{data:s}=await o.get(`${c}/time-slots`);return s}),v=(s,t)=>{const{toastDispatch:e}=i(),{closeModal:a}=p();return n(()=>o.post(`${c}/time-slots`,s.body),{...t,onSuccess:()=>{e({toastType:"SUCCESS",actionType:"APPEND_TOAST",message:"자습실 이용 시간이 추가되었습니다."}),a()},onError:T=>{if(T.request.status)switch(T.request.status){case 400:e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"값이 잘못되었습니다."});case 401:e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"계정오류"});case 403:e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"권한이 없습니다."});case 409:e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"이미 존재합니다."})}}})},M=({path:s,body:t})=>{const{toastDispatch:e}=i(),{closeModal:a}=p();return n(()=>o.patch(`${c}/time-slots/${s.time_slot_id}`,t),{onSuccess:()=>{e({toastType:"SUCCESS",actionType:"APPEND_TOAST",message:"자습실 이용 시간이 수정되었습니다."}),a()},onError:T=>{if(e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"자습실 이용시간 수정이 실패되었습니다."}),T.request.status)switch(T.request.status){case 400:e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"값이 잘못되었습니다."});case 401:e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"계정오류"});case 403:e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"권한이 없습니다."});case 409:e({toastType:"ERROR",actionType:"APPEND_TOAST",message:"이미 존재합니다."})}}})},q=({path:s})=>{const{toastDispatch:t}=i(),{closeModal:e}=p();return n(()=>o.delete(`${c}/time-slots/${s.time_slot_id}`),{onSuccess:()=>{t({toastType:"SUCCESS",actionType:"APPEND_TOAST",message:"자습실 이용시간이 삭제되었습니다."}),e()},onError:()=>t({toastType:"ERROR",actionType:"APPEND_TOAST",message:"자습실 이용시간 삭제를 실패했습니다."})})},B=()=>n(()=>o.post(`${c}/students/file`,null,{responseType:"blob"}),{onSuccess:s=>{const t=new Blob([s.data],{type:s.headers["content-type"]}),e=s.headers["content-disposition"];r.saveAs(t,R(e))}}),F=s=>n(()=>{const t=new FormData;return t.append("file",s),o.post(`${c}/students/file`,t,{responseType:"blob"})},{onSuccess:t=>{const e=new Blob([t.data],{type:t.headers["content-type"]}),a=t.headers["content-disposition"];r.saveAs(e,R(a))}}),U=()=>n(async()=>{const s=document.createElement("a");s.href="https://image-dms.s3.ap-northeast-2.amazonaws.com/DMS_%E1%84%8E%E1%85%AE%E1%84%80%E1%85%A1%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%E1%84%8B%E1%85%A6%E1%86%A8%E1%84%89%E1%85%A6%E1%86%AF_%E1%84%8B%E1%85%A8%E1%84%89%E1%85%B5.xlsx",s.click()});export{q as a,F as b,U as c,v as d,M as e,g as f,_ as g,k as h,f as i,h as j,D as k,w as l,$ as m,N as n,b as o,C as p,B as u};
